var p={},D=(y,b,L)=>(p.__chunk_89137=(N,v,r)=>{"use strict";r.d(v,{r:()=>x});var t=r(29220),_=r(34929),E=r(67594);let x=({userId:c,nid:d,locale:o,pageName:f,isEvaluatedUser:h,ip:A,alias:T,linkText:k})=>{let a=(0,t.useRef)(null),s=(0,t.useRef)(null),m=(0,t.useRef)(null);(0,E.s)(),(0,t.useEffect)(()=>{(0,_.h)().then(i=>{m.current=i})},[]),(0,t.useEffect)(()=>{if(!h)return;a.current=new Date;let i=l=>{let e=l.target.closest("a[href]");e&&(s.current={text:e.innerText.split(`
`)[0].trim(),url:e.href})},u=()=>{if(!a.current)return;let l=new Date().getTime()-a.current.getTime();if(l<500)return;let e=new Date,g=m.current;if(!g)return;let w={node_id:d||"0",user_id:c||"0",time_spent:Math.floor(l/1e3),alias:T,locale:o,date:e.toLocaleDateString("en-GB"),time:e.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}),title:f||document.title,link_text:s.current?.text||k||"N/A",link_url:s.current?.url||"N/A"};fetch(`https://edit-dev.laaha.org/${o}/api/v1/evaluated-analytics-collection`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(w),keepalive:!0}).then(n=>n.json()).then(n=>console.log("Analytics sent successfully:",n)).catch(n=>console.error("Failed to send analytics:",n))};return document.addEventListener("click",i),window.addEventListener("beforeunload",u),()=>{u(),document.removeEventListener("click",i),window.removeEventListener("beforeunload",u)}},[c,d,o,f,h])}},p);export{D as __getNamedExports};
