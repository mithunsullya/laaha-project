var A={},le=(ne,ae,ie)=>(A.__chunk_14897=()=>{},A.__chunk_64479=()=>{},A.__chunk_10411=(G,L,t)=>{"use strict";t.d(L,{Z:()=>k});var e=t(60926),r=t(7433),n=t(52851),R=t(29220);let k=({isOpen:U,onClose:f,onSubmit:v,reasonOptions:C,resourceId:_,entityType:b})=>{let[h,d]=(0,R.useState)(""),{translations:i}=(0,r.T)(),j=(0,n.useLocale)();return(0,e.jsx)("div",{className:`fixed inset-0 bg-gray-500 bg-opacity-50 flex justify-center items-center z-50 ${U?"block":"hidden"}`,onClick:f,children:(0,e.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-xl w-96",onClick:s=>s.stopPropagation(),children:[(0,e.jsx)("h2",{className:"text-xl font-semibold mb-4",children:b==="comment"?`${i?.[j]?.report_comments||"Report Comments"}`:`${i?.[j]?.report_questions}`}),(0,e.jsx)("ul",{className:"space-y-2 ps-0 list-none",children:C&&Object.entries(C).map((s,y)=>(0,e.jsx)("li",{id:s[0],onClick:$=>d(s[0]),className:`cursor-pointer p-2 rounded-md hover:bg-color-secondary ${h===s[0]?"bg-primary text-white hover:text-default-black":""}`,children:s[1]},y))}),(0,e.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[(0,e.jsx)("button",{className:"px-4 py-2 cursor-pointer text-primary hover:text-red rounded-md",onClick:f,children:i?.[j]?.cancel}),(0,e.jsx)("button",{className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-red",onClick:()=>{h?(v(h),f()):alert("Please select a reason for reporting.")},children:i?.[j]?.submit})]})]})})}},A.__chunk_40375=(G,L,t)=>{"use strict";t.d(L,{Z:()=>j});var e=t(60926),r=t(29220),n=t(27797),R=t(13940),k=t(58936),U=t(69749),f=t(83120),v=t(28277),C=t(85016),_=t(26186),b=t(10411),h=t(52851),d=t(80390),i=t(7433);let j=({reply:s,currentUser:y})=>{let[$,Z]=(0,r.useState)(s.reactions||{}),[a,w]=(0,r.useState)(s.current_user?.initialReaction||null),{role:u}=(0,C.Q)(),[l,m]=(0,r.useState)(!1),F=(0,r.useRef)(null),N=(0,r.useContext)(C.l),[q,E]=(0,r.useState)(!1),[S,D]=(0,r.useState)([]),[O,x]=(0,r.useState)(""),g=(0,h.useLocale)(),{translations:I}=(0,i.T)(),J=async(o,P,z)=>{try{await(0,k.y4)(o,P,z)}catch(H){console.error("Error creating resource:",H)}};(0,r.useEffect)(()=>{s.current_user?.initialReaction!=null&&(w(s.current_user?.initialReaction),Z(s.reactions))},[s.current_user?.initialReaction,s.reactions]);let Y=o=>{F.current&&!F.current.contains(o.target)&&m(!1)},K=o=>{(0,k.Ax)(o,"comment",g,x)};return(0,r.useEffect)(()=>(document.addEventListener("mousedown",Y),()=>{document.removeEventListener("mousedown",Y)}),[y]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"replies flex items-start mb-6",children:[s.user.avatar_url?(0,e.jsx)("div",{className:"user-avatar max-w-8",children:(0,e.jsx)(v.Z,{alt:s.user.name,width:32,height:32,src:s.user.avatar_url,title:s.user.name})}):(0,e.jsx)("div",{className:"user-avatar max-w-8",children:(0,e.jsx)(f.nY,{})}),(0,e.jsxs)("div",{className:"user-reply w-full bg-gray-400 ms-2 p-3 rounded-xl",children:[(0,e.jsxs)("div",{className:"user-info-wrapper flex justify-between items-center",children:[(0,e.jsxs)("div",{className:"user-name",children:[(0,e.jsx)("strong",{className:`${u==="moderator"?"text-primary":""}`,children:s.user.name}),(0,e.jsx)("span",{children:" | "}),(0,e.jsx)("span",{className:"post-time",children:s.user.time})]}),y?.isUserLoggedIn&&(0,e.jsxs)("div",{className:"user-actions relative cursor-pointer",ref:F,children:[(0,e.jsx)("span",{onClick:()=>m(!l),className:"user-action-button",children:"..."}),(0,e.jsxs)("ul",{className:`user-action-links absolute right-0 py-2 ps-3 pe-6 rounded-md shadow-[0px_1px_2px_0px_rgba(0,0,0,0.1)] bg-white list-none ${l?"active block":"hidden"}`,children:[s.user.name.toLowerCase()!==y?.userName.toLowerCase()&&(0,e.jsx)("li",{children:(0,e.jsx)("span",{className:"report pb-2",onClick:()=>{E(!0),(0,_.H)(g).then(o=>{D(o)})},children:I?.[g]?.report})}),s.user.name.toLowerCase()===y?.userName.toLowerCase()&&(0,e.jsx)("li",{children:(0,e.jsx)("span",{className:"delete pb-2",onClick:()=>K(s.id),children:I?.[g]?.delete})})]})]})]}),(0,e.jsx)("div",{className:"reply-msg mt-1 mb-4",children:(0,e.jsx)(U.G,{html:s.description})}),(0,e.jsxs)("div",{className:"reactions inline-flex items-center",children:[(0,e.jsx)("button",{className:"like-button relative text-m pe-2 me-2 after:absolute after:h-3.5 after:w-px after:bg-light-gray after:top-0.5 after:right-0",children:N?.isUserLoggedIn?(0,e.jsx)(R.Z,{reaction:a,setReaction:w,handleReaction:(o,P,z)=>{w(H=>H===o?null:o),Z(H=>{let p={...H};return a&&p[a]!==void 0&&(p[a]=Math.max(p[a]-1,0)),p[o]!==void 0?p[o]=p[o]+1:p[o]=1,p}),J(o,P,z)},resId:s.id,resType:"comment",disableIcon:s.user.name===y?.userName}):(0,e.jsx)("span",{className:"use-ajax block",onClick:o=>{o.preventDefault(),N?.setShowSignUpModal(!0)},children:I?.[g]?.like})}),(0,e.jsx)("div",{className:"emotions",children:(0,e.jsx)(n.Z,{reactions:$})})]})]})]}),q&&(0,e.jsx)(b.Z,{isOpen:q,onClose:()=>E(!1),onSubmit:o=>{(0,k.Fe)(s.id,o,g,"comment",x)},reasonOptions:S,resourceId:s.id,entityType:"comment"}),O&&(0,e.jsx)(d.Z,{message:O})]})}},A.__chunk_13940=(G,L,t)=>{"use strict";t.d(L,{Z:()=>f});var e=t(60926),r=t(29220),n=t(62140),R=t(83120);t(14897);var k=t(7433),U=t(19195);let f=({reaction:v,setReaction:C,handleReaction:_,resId:b,resType:h,disableIcon:d})=>{let[i,j]=(0,r.useState)(!1),{translations:s}=(0,k.T)(),y=(0,U.useLocale)();return(0,e.jsxs)("div",{className:`reaction-container py-3 relative ${i?"hovering":""} ${d?"pointer-events-none":""}`,onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:[(0,e.jsxs)("div",{className:`reaction-options bg-white px-4 py-2 absolute left-1/2 -translate-x-2/4 -top-8 rounded-2xl shadow-lg items-center gap-2 ${i?"flex":"hidden"} ${d?"disabled":""}`,children:[(0,e.jsx)("button",{onClick:()=>_("cry",b,h),children:(0,e.jsx)(n._J,{})}),(0,e.jsx)("button",{onClick:()=>_("heart",b,h),children:(0,e.jsx)(n.Xd,{})}),(0,e.jsx)("button",{onClick:()=>_("hug",b,h),children:(0,e.jsx)(n.C2,{})}),(0,e.jsx)("button",{onClick:()=>_("pray",b,h),children:(0,e.jsx)(n.SH,{})}),(0,e.jsx)("button",{onClick:()=>_("sad",b,h),children:(0,e.jsx)(n._H,{})}),(0,e.jsx)("button",{onClick:()=>_("smile",b,h),children:(0,e.jsx)(n.WK,{})})]}),(0,e.jsx)("div",{className:`selected-reaction flex justify-center items-center gap-1.5 ${d?"disabled pointer-events-none opacity-50":""}`,children:v==="heart"?(0,e.jsx)(n.Xd,{}):v==="sad"?(0,e.jsx)(n._H,{}):v==="cry"?(0,e.jsx)(n._J,{}):v==="smile"?(0,e.jsx)(n.WK,{}):v==="pray"?(0,e.jsx)(n.SH,{}):v==="hug"?(0,e.jsx)(n.C2,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(R.gz,{}),(0,e.jsx)("span",{children:s?.[y]?.like})," "]})})]})}},A.__chunk_41426=(G,L,t)=>{"use strict";t.d(L,{Z:()=>h});var e=t(60926),r=t(29220),n=t(26186),R=t(56454),k=t(58936),U=t(73653),f=t(40375);let v=({replies:d,currentUser:i})=>(0,e.jsx)("div",{className:"replies-list",children:d?.map((j,s)=>e.jsx(f.Z,{reply:j,currentUser:i},s))});t(64479);var C=t(34929),_=t(7433),b=t(19195);let h=({currentUser:d,questionID:i,onClose:j})=>{let s=(0,r.useRef)(null),[y,$]=(0,r.useState)(!1),[Z,a]=(0,r.useState)(null),{translations:w}=(0,_.T)(),u=(0,b.useLocale)(),l=async m=>{let F=await(0,C.getAccessToken)();$(!0);try{let N=await(0,k.df)(m,F);a(N.data)}catch(N){console.error("Error fetching question:",N)}finally{$(!1)}};return(0,r.useEffect)(()=>{i!=null&&l(i)},[i]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"modal-overlay bg-[rgba(0,0,0,0.3)] community-overlay z-20 fixed w-screen h-screen top-0 bottom-0 right-0 left-0",onClick:()=>j(i),children:(0,e.jsxs)("div",{className:"modal-content bg-white rounded-xl py-8 px-4 fixed top-1/2 overflow-y-auto max-h-[70%] w-full max-w-[calc(100%-2rem)] lg:max-w-[50rem] -translate-x-1/2 -translate-y-1/2 left-1/2",onClick:m=>m.stopPropagation(),children:[(0,e.jsx)("button",{className:"modal-close underline mb-4 text-m text-light-gray",onClick:()=>j(i),children:"Close"}),y?(0,e.jsx)(R.ListingShimmer,{}):Z&&(0,e.jsxs)("div",{className:"modal-body relative",children:[(0,e.jsx)(n.Z,{question:Z,onClick:()=>{s.current&&s.current.focus()},currentUser:d}),(0,e.jsx)(v,{replies:Z.all_replies,currentUser:d}),d&&d.isUserLoggedIn&&(0,e.jsx)(U.Z,{placeholder:`${w?.[u]?.comment_as}`,username:d.userName,currentUser:d,ref:s,resourceId:"node"})]})]})})})}},A.__chunk_26186=(G,L,t)=>{"use strict";t.d(L,{H:()=>$,Z:()=>Z});var e=t(60926),r=t(83120),n=t(29220),R=t(69749),k=t(27797),U=t(13940),f=t(58936),v=t(10411),C=t(36104),_=t(85016),b=t(28277),h=t(52851),d=t(80390),i=t(34929),j=t(7433),s=t(56779);let y=a=>`report-reasons-${a}`,$=async a=>{let w=y(a),u=localStorage.getItem(w);if(u){let{data:l,timestamp:m}=JSON.parse(u);if(Date.now()-m<36e5)return l.report_step_1.report_category["#options"]}try{let l=await(0,i.getAccessToken)(),m=await(0,f.YR)(a,l);return localStorage.setItem(w,JSON.stringify({data:m,timestamp:Date.now()})),m.report_step_1.report_category["#options"]}catch(l){if(console.error("Failed to fetch report reasons:",l),u){let{data:m}=JSON.parse(u);return m.report_step_1.report_category["#options"]}throw l}},Z=({question:a,onClick:w,currentUser:u})=>{let{user:l,reactions:m,actions:F,current_user:N}=a,[q,E]=(0,n.useState)(m||{}),[S,D]=(0,n.useState)(N.initialReaction||null),[O,x]=(0,n.useState)(!1),[g,I]=(0,n.useState)(!1),J=(0,n.useRef)(null),[Y,K]=(0,n.useState)(!1),[o,P]=(0,n.useState)([]),[z,H]=(0,n.useState)("");(0,i.getAccessToken)();let p=(0,h.useLocale)(),{translations:M}=(0,j.T)(),{isAuthUser:V}=(0,s.J)(),Q=(0,n.useContext)(_.l),se=()=>{x(!O)},re=async(c,X,B)=>{try{await(0,f.y4)(c,X,B)}catch(T){console.error("Error creating resource:",T)}},ee=c=>{J.current&&!J.current.contains(c.target)&&I(!1)},te=c=>{c.preventDefault(),Q?.setShowSignUpModal(!0)};(0,n.useEffect)(()=>(document.addEventListener("mousedown",ee),()=>{document.removeEventListener("mousedown",ee)}),[]),(0,n.useEffect)(()=>{N?.initialReaction!=null&&(D(N.initialReaction),E(m))},[N?.initialReaction,m]);let W=O?a.question_detail:a.question_detail.length>200?a.question_detail.slice(0,200)+"...":a.question_detail;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"question-content",children:[(0,e.jsxs)("div",{className:"user-content flex justify-between items-center",children:[(0,e.jsxs)("div",{className:"user-info flex items-center",children:[l.avatar_url?(0,e.jsx)(b.Z,{src:l.avatar_url,width:32,height:32,alt:"User",className:"user-avatar max-w-8 me-4"}):(0,e.jsx)("div",{className:"me-4",children:(0,e.jsx)(r.nY,{})}),(0,e.jsxs)("div",{className:"user-name text-m",children:[(0,e.jsx)("strong",{className:`${l.role==="moderator"?"text-primary":""}`,children:l.name}),(0,e.jsx)("span",{children:" | "}),(0,e.jsx)("span",{className:"post-time",children:l.time})]})]}),u&&Q?.isUserLoggedIn&&(0,e.jsxs)("div",{className:"user-actions relative cursor-pointer",ref:J,children:[(0,e.jsx)("span",{onClick:()=>I(!g),className:"user-action-button",children:"..."}),(0,e.jsx)("ul",{className:`user-action-links absolute right-0 py-2 ps-3 pe-6 rounded-md shadow-[0px_1px_2px_0px_rgba(0,0,0,0.1)] bg-white list-none ${g?"active block":"hidden"}`,children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("li",{onClick:()=>{K(!0),$(p).then(c=>{P(c)})},className:"flex items-center",children:M?.[p]?.report}),l.name===u.userName&&(0,e.jsx)("li",{onClick:()=>{(0,f.Ax)(a.id,"question",p,H)},className:"flex items-center",children:M?.[p]?.delete})]})})]})]}),(0,e.jsxs)("div",{className:"question-text mt-4",children:[a.category&&(0,e.jsx)("div",{className:"tags p-1.5 bg-color-secondary rounded-lg text-primary inline-block",children:a.category}),W&&(0,e.jsx)("div",{className:"question mt-2 mb-4",children:(0,e.jsx)(R.G,{html:W})}),W.length>200&&(0,e.jsx)("div",{className:"showmore mb-2 inline-flex gap-1 items-start cursor-pointer text-blue text-m",onClick:()=>se(),children:O?(0,e.jsxs)(e.Fragment,{children:[M?.[p]?.see_less,(0,e.jsx)("span",{className:"mt-[2px] transition-all ease-in-out -rotate-90",children:(0,e.jsx)(r.ol,{stroke:"#4856df",width:14,height:14})})]}):(0,e.jsxs)(e.Fragment,{children:[M?.[p]?.see_more,(0,e.jsx)("span",{className:"mt-[2px] transition-all ease-in-out rotate-90",children:(0,e.jsx)(r.ol,{stroke:"#4856df",width:14,height:14})})]})})]}),(0,e.jsxs)("div",{className:"reactions flex justify-between items-center mb-4",children:[(0,e.jsx)(k.Z,{reactions:q}),(0,e.jsxs)("span",{className:"comment-count text-m",children:[a.comment_count," ",M?.[p]?.comments]})]})]}),(0,e.jsxs)("div",{className:"like-comment mb-6 flex justify-between",children:[(0,e.jsx)("button",{className:`${V?"":"pointer-events-none opacity-50"} like-button border border-gray-300 rounded-md text-center flex-[0_0_50%] flex justify-center items-center`,children:Q?.isUserLoggedIn?(0,e.jsx)(U.Z,{reaction:S,setReaction:D,handleReaction:(c,X,B)=>{D(T=>T===c?null:c),E(T=>S!==null&&S!==c?{...T,[S]:Math.max(parseInt(T[S],10)-1,0),[c]:parseInt(T[c],10)+1}:{...T,[c]:S===c?Math.max(parseInt(T[c],10)-1,0):S!=null?parseInt(T[c],10):parseInt(T[c],10)+1}),re(c,X,B)},resId:a.id,resType:"node",disableIcon:l.name===u.userName}):(0,e.jsxs)(C.default,{href:"#",onClick:te,className:"flex justify-center items-center gap-1.5",children:[(0,e.jsx)(r.gz,{})," ",M?.[p]?.like]})}),(0,e.jsxs)("button",{className:`${V?"":"pointer-events-none opacity-50"} comment-button py-3 gap-1.5 border border-gray-300 rounded-md text-center flex-[0_0_50%] flex items-center justify-center`,onClick:w,children:[(0,e.jsx)("span",{className:"comment-icon",children:(0,e.jsx)(r.qt,{})}),Q?.isUserLoggedIn?(0,e.jsx)("span",{children:M?.[p]?.comment}):(0,e.jsx)(C.default,{onClick:te,className:"use-ajax flex justify-center items-center",href:"#",children:M?.[p]?.comment})]})]}),(0,e.jsx)(v.Z,{isOpen:Y,onClose:()=>K(!1),onSubmit:c=>{(0,f.Fe)(a.id,c,p,"node",H)},reasonOptions:o,resourceId:a.id,entityType:"node"}),z&&(0,e.jsx)(d.Z,{message:z})]})}},A.__chunk_73653=(G,L,t)=>{"use strict";t.d(L,{Z:()=>d});var e=t(60926),r=t(29220),n=t(58936),R=t(80390),k=t(83120),U=t(28277),f=t(73521),v=t(85016),C=t(34929),_=t(7433),b=t(19195);let h=(0,r.forwardRef)((i,j)=>{let[s,y]=(0,r.useState)(""),[$,Z]=(0,r.useState)(!1),a=(0,r.useRef)(null),w=(0,r.useRef)(null),u=i.currentUser,[l,m]=(0,r.useState)(!1),[F,N]=(0,r.useState)(""),{translations:q}=(0,_.T)(),E=(0,b.useLocale)(),{role:S}=(0,v.Q)();(0,r.useImperativeHandle)(j,()=>({focus:()=>{a.current?.focus()}})),(0,r.useEffect)(()=>{let x=setTimeout(()=>{m(!1),N("")},3e3);return()=>clearTimeout(x)},[F]),(0,r.useEffect)(()=>{let x=g=>{a.current&&!a.current.contains(g.target)&&w.current&&!w.current.contains(g.target)&&Z(!1)};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[]);let D=async(x,g,I)=>{let J=await(0,C.getAccessToken)();try{(await(0,n.p1)(g,x,I,J)).status===200&&(m(!0),I==="review"&&S!=="moderator"?N(q?.[E].posted_comments):I==="review"&&S==="moderator"?(N(q?.[E].moderator_posted_comments||"You posted a comment."),i.addComment(g,x)):N(q?.[E]?.draft_comments))}catch(Y){console.error("Error creating resource:",Y)}},O=(x,g,I)=>{x.preventDefault(),s.trim().length>0&&(D(s,g,I),y(""))};return(0,e.jsxs)("div",{className:"comment-input flex gap-x-4",children:[u&&u.isUserLoggedIn&&u.userAvatarUrl&&(0,e.jsx)(e.Fragment,{children:u.userAvatarUrl?(0,e.jsx)("div",{className:"current-user",children:(0,e.jsx)(U.Z,{alt:u.userName,width:32,height:32,src:(0,f.GR)("/"+u.userAvatarUrl),title:u.userName})}):(0,e.jsx)("div",{className:"current-user",children:(0,e.jsx)(k.nY,{})})}),(0,e.jsxs)("form",{action:"",className:"w-full",children:[(0,e.jsx)("input",{ref:a,type:"text",className:"w-full bg-gray-300 rounded-lg p-3",placeholder:`${i.placeholder} ${i.username}`,value:s,onChange:x=>y(x.target.value),onFocus:()=>Z(!0)}),$&&(0,e.jsxs)("div",{className:"form-submit inline-flex items-center gap-x-2 mt-5 w-full justify-end",ref:w,children:[(0,e.jsx)("input",{type:"button",onClick:x=>O(x,i.resourceId,"draft"),value:q?.[E]?.draft_button,disabled:!s.trim(),className:"draft-button px-4 py-2 text-primary cursor-pointer disabled:opacity-80 disabled:pointer-events-none hover:text-red"}),(0,e.jsx)("input",{type:"submit",onClick:x=>O(x,i.resourceId,"review"),value:q?.[E].post_button,className:"px-4 py-2 bg-primary cursor-pointer disabled:opacity-75 disabled:pointer-events-none rounded-md text-white hover:bg-red-100",disabled:!s.trim()})]})]}),l&&(0,e.jsx)(R.Z,{message:F})]})});h.displayName="CommentInput";let d=h},A);export{le as __getNamedExports};
