var H={},le=(ne,ae,ie)=>(H.__chunk_14897=()=>{},H.__chunk_64479=()=>{},H.__chunk_10411=(G,R,s)=>{"use strict";s.d(R,{Z:()=>k});var e=s(60926),r=s(7433),n=s(52851),U=s(29220);let k=({isOpen:Z,onClose:f,onSubmit:v,reasonOptions:C,resourceId:_,entityType:b})=>{let[h,u]=(0,U.useState)(""),{translations:i}=(0,r.T)(),j=(0,n.useLocale)();return(0,e.jsx)("div",{className:`fixed inset-0 bg-gray-500 bg-opacity-50 flex justify-center items-center z-50 ${Z?"block":"hidden"}`,onClick:f,children:(0,e.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-xl w-96",onClick:t=>t.stopPropagation(),children:[(0,e.jsx)("h2",{className:"text-xl font-semibold mb-4",children:b==="comment"?`${i?.[j]?.report_comments||"Report Comments"}`:`${i?.[j]?.report_questions}`}),(0,e.jsx)("ul",{className:"space-y-2 ps-0 list-none",children:C&&Object.entries(C).map((t,y)=>(0,e.jsx)("li",{id:t[0],onClick:$=>u(t[0]),className:`cursor-pointer p-2 rounded-md hover:bg-color-secondary ${h===t[0]?"bg-primary text-white hover:text-default-black":""}`,children:t[1]},y))}),(0,e.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[(0,e.jsx)("button",{className:"px-4 py-2 cursor-pointer text-primary hover:text-red rounded-md",onClick:f,children:i?.[j]?.cancel}),(0,e.jsx)("button",{className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-red",onClick:()=>{h?(v(h),f()):alert("Please select a reason for reporting.")},children:i?.[j]?.submit})]})]})})}},H.__chunk_40375=(G,R,s)=>{"use strict";s.d(R,{Z:()=>j});var e=s(60926),r=s(29220),n=s(27797),U=s(13940),k=s(58936),Z=s(69749),f=s(83120),v=s(58997),C=s(85016),_=s(26186),b=s(10411),h=s(52851),u=s(80390),i=s(7433);let j=({reply:t,currentUser:y})=>{let[$,E]=(0,r.useState)(t.reactions||{}),[a,w]=(0,r.useState)(t.current_user?.initialReaction||null),{role:l}=(0,C.Q)(),[m,x]=(0,r.useState)(!1),q=(0,r.useRef)(null),N=(0,r.useContext)(C.l),[F,I]=(0,r.useState)(!1),[L,D]=(0,r.useState)([]),[O,p]=(0,r.useState)(""),g=(0,h.useLocale)(),{translations:S}=(0,i.T)(),J=async(o,P,z)=>{try{await(0,k.y4)(o,P,z,g)}catch(M){console.error("Error creating resource:",M)}};(0,r.useEffect)(()=>{t.current_user?.initialReaction!=null&&(w(t.current_user?.initialReaction),E(t.reactions))},[t.current_user?.initialReaction,t.reactions]);let Y=o=>{q.current&&!q.current.contains(o.target)&&x(!1)},K=o=>{(0,k.Ax)(o,"comment",g,p)};return(0,r.useEffect)(()=>(document.addEventListener("mousedown",Y),()=>{document.removeEventListener("mousedown",Y)}),[y]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"replies flex items-start mb-6",children:[t.user.avatar_url?(0,e.jsx)("div",{className:"user-avatar max-w-8",children:(0,e.jsx)(v.Z,{alt:t.user.name,width:32,height:32,src:t.user.avatar_url,title:t.user.name})}):(0,e.jsx)("div",{className:"user-avatar max-w-8",children:(0,e.jsx)(f.nY,{})}),(0,e.jsxs)("div",{className:"user-reply w-full bg-gray-400 ms-2 p-3 rounded-xl",children:[(0,e.jsxs)("div",{className:"user-info-wrapper flex justify-between items-center",children:[(0,e.jsxs)("div",{className:"user-name inline-flex gap-x-2",children:[(0,e.jsx)("strong",{className:`${l==="moderator"?"text-primary":""}`,children:t.user.name}),(0,e.jsx)("span",{children:" | "}),(0,e.jsx)("span",{className:"post-time",children:t.user.time})]}),y?.isUserLoggedIn&&(0,e.jsxs)("div",{className:"user-actions relative cursor-pointer",ref:q,children:[(0,e.jsx)("span",{onClick:()=>x(!m),className:"user-action-button",children:"..."}),(0,e.jsxs)("ul",{className:`user-action-links absolute end-0 py-2 ps-3 pe-6 rounded-md shadow-[0px_1px_2px_0px_rgba(0,0,0,0.1)] bg-white list-none ${m?"active block":"hidden"}`,children:[t.user.name.toLowerCase()!==y?.userName.toLowerCase()&&(0,e.jsx)("li",{children:(0,e.jsx)("span",{className:"report pb-2",onClick:()=>{I(!0),(0,_.H)(g).then(o=>{D(o)})},children:S?.[g]?.report})}),t.user.name.toLowerCase()===y?.userName.toLowerCase()&&(0,e.jsx)("li",{children:(0,e.jsx)("span",{className:"delete pb-2",onClick:()=>K(t.id),children:S?.[g]?.delete})})]})]})]}),(0,e.jsx)("div",{className:"reply-msg mt-1 mb-4",children:(0,e.jsx)(Z.G,{html:t.description})}),(0,e.jsxs)("div",{className:"reactions inline-flex items-center",children:[(0,e.jsx)("button",{className:"like-button relative text-m pe-2 me-2 after:absolute after:h-3.5 after:w-px after:bg-light-gray after:top-0.5 after:end-0",children:N?.isUserLoggedIn?(0,e.jsx)(U.Z,{reaction:a,setReaction:w,handleReaction:(o,P,z)=>{w(M=>M===o?null:o),E(M=>{let c={...M};return a&&c[a]!==void 0&&(c[a]=Math.max(c[a]-1,0)),c[o]!==void 0?c[o]=c[o]+1:c[o]=1,c}),J(o,P,z)},resId:t.id,resType:"comment",disableIcon:t.user.name===y?.userName}):(0,e.jsx)("span",{className:"use-ajax block",onClick:o=>{o.preventDefault(),N?.setShowSignUpModal(!0)},children:S?.[g]?.like})}),(0,e.jsx)("div",{className:"emotions",children:(0,e.jsx)(n.Z,{reactions:$})})]})]})]}),F&&(0,e.jsx)(b.Z,{isOpen:F,onClose:()=>I(!1),onSubmit:o=>{(0,k.Fe)(t.id,o,g,"comment",p,S)},reasonOptions:L,resourceId:t.id,entityType:"comment"}),O&&(0,e.jsx)(u.Z,{message:O})]})}},H.__chunk_13940=(G,R,s)=>{"use strict";s.d(R,{Z:()=>f});var e=s(60926),r=s(29220),n=s(62140),U=s(83120);s(14897);var k=s(7433),Z=s(19195);let f=({reaction:v,setReaction:C,handleReaction:_,resId:b,resType:h,disableIcon:u})=>{let[i,j]=(0,r.useState)(!1),{translations:t}=(0,k.T)(),y=(0,Z.useLocale)();return(0,e.jsxs)("div",{className:`reaction-container py-3 relative ${i?"hovering":""} ${u?"pointer-events-none":""}`,onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:[(0,e.jsxs)("div",{className:`reaction-options bg-white px-4 py-2 absolute left-1/2 -translate-x-2/4 -top-8 rounded-2xl shadow-lg items-center gap-2 ${i?"flex":"hidden"} ${u?"disabled":""}`,children:[(0,e.jsx)("button",{onClick:()=>_("cry",b,h),children:(0,e.jsx)(n._J,{})}),(0,e.jsx)("button",{onClick:()=>_("heart",b,h),children:(0,e.jsx)(n.Xd,{})}),(0,e.jsx)("button",{onClick:()=>_("hug",b,h),children:(0,e.jsx)(n.C2,{})}),(0,e.jsx)("button",{onClick:()=>_("pray",b,h),children:(0,e.jsx)(n.SH,{})}),(0,e.jsx)("button",{onClick:()=>_("sad",b,h),children:(0,e.jsx)(n._H,{})}),(0,e.jsx)("button",{onClick:()=>_("smile",b,h),children:(0,e.jsx)(n.WK,{})})]}),(0,e.jsx)("div",{className:`selected-reaction flex justify-center items-center gap-1.5 ${u?"disabled pointer-events-none opacity-50":""}`,children:v==="heart"?(0,e.jsx)(n.Xd,{}):v==="sad"?(0,e.jsx)(n._H,{}):v==="cry"?(0,e.jsx)(n._J,{}):v==="smile"?(0,e.jsx)(n.WK,{}):v==="pray"?(0,e.jsx)(n.SH,{}):v==="hug"?(0,e.jsx)(n.C2,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(U.gz,{}),(0,e.jsx)("span",{children:t?.[y]?.like})," "]})})]})}},H.__chunk_41426=(G,R,s)=>{"use strict";s.d(R,{Z:()=>h});var e=s(60926),r=s(29220),n=s(26186),U=s(56454),k=s(58936),Z=s(73653),f=s(40375);let v=({replies:u,currentUser:i})=>(0,e.jsx)("div",{className:"replies-list",children:u?.map((j,t)=>e.jsx(f.Z,{reply:j,currentUser:i},t))});s(64479);var C=s(34929),_=s(7433),b=s(19195);let h=({currentUser:u,questionID:i,onClose:j})=>{let t=(0,r.useRef)(null),[y,$]=(0,r.useState)(!1),[E,a]=(0,r.useState)(null),{translations:w}=(0,_.T)(),l=(0,b.useLocale)(),m=async x=>{let q=await(0,C.getAccessToken)();$(!0);try{let N=await(0,k.df)(x,q,l);a(N.data)}catch(N){console.error("Error fetching question:",N)}finally{$(!1)}};return(0,r.useEffect)(()=>{i!=null&&m(i)},[i]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"modal-overlay bg-[rgba(0,0,0,0.3)] community-overlay z-20 fixed w-screen h-screen top-0 bottom-0 right-0 left-0",onClick:()=>j(i),children:(0,e.jsxs)("div",{className:"modal-content bg-white rounded-xl py-8 px-4 fixed top-1/2 overflow-y-auto max-h-[70%] w-full max-w-[calc(100%-2rem)] lg:max-w-[50rem] -translate-x-1/2 -translate-y-1/2 left-1/2",onClick:x=>x.stopPropagation(),children:[(0,e.jsx)("button",{className:"modal-close underline mb-4 text-m text-light-gray",onClick:()=>j(i),children:"Close"}),y?(0,e.jsx)(U.ListingShimmer,{}):E&&(0,e.jsxs)("div",{className:"modal-body relative",children:[(0,e.jsx)(n.Z,{question:E,onClick:()=>{t.current&&t.current.focus()},currentUser:u}),(0,e.jsx)(v,{replies:E.all_replies,currentUser:u}),u&&u.isUserLoggedIn&&(0,e.jsx)(Z.Z,{placeholder:`${w?.[l]?.comment_as}`,username:u.userName,currentUser:u,ref:t,resourceId:i||"node"})]})]})})})}},H.__chunk_26186=(G,R,s)=>{"use strict";s.d(R,{H:()=>$,Z:()=>E});var e=s(60926),r=s(83120),n=s(29220),U=s(69749),k=s(27797),Z=s(13940),f=s(58936),v=s(10411),C=s(13785),_=s(85016),b=s(58997),h=s(52851),u=s(80390),i=s(34929),j=s(7433),t=s(56779);let y=a=>`report-reasons-${a}`,$=async a=>{let w=y(a),l=localStorage.getItem(w);if(l){let{data:m,timestamp:x}=JSON.parse(l);if(Date.now()-x<36e5)return m.report_step_1.report_category["#options"]}try{let m=await(0,i.getAccessToken)(),x=await(0,f.YR)(a,m);return localStorage.setItem(w,JSON.stringify({data:x,timestamp:Date.now()})),x.report_step_1.report_category["#options"]}catch(m){if(console.error("Failed to fetch report reasons:",m),l){let{data:x}=JSON.parse(l);return x.report_step_1.report_category["#options"]}throw m}},E=({question:a,onClick:w,currentUser:l})=>{let{user:m,reactions:x,actions:q,current_user:N}=a,[F,I]=(0,n.useState)(x||{}),[L,D]=(0,n.useState)(N.initialReaction||null),[O,p]=(0,n.useState)(!1),[g,S]=(0,n.useState)(!1),J=(0,n.useRef)(null),[Y,K]=(0,n.useState)(!1),[o,P]=(0,n.useState)([]),[z,M]=(0,n.useState)("");(0,i.getAccessToken)();let c=(0,h.useLocale)(),{translations:A}=(0,j.T)(),{isAuthUser:V}=(0,t.J)(),Q=(0,n.useContext)(_.l),te=()=>{p(!O)},re=async(d,X,B)=>{try{await(0,f.y4)(d,X,B,c)}catch(T){console.error("Error creating resource:",T)}},ee=d=>{J.current&&!J.current.contains(d.target)&&S(!1)},se=d=>{d.preventDefault(),Q?.setShowSignUpModal(!0)};(0,n.useEffect)(()=>(document.addEventListener("mousedown",ee),()=>{document.removeEventListener("mousedown",ee)}),[]),(0,n.useEffect)(()=>{N?.initialReaction!=null&&(D(N.initialReaction),I(x))},[N?.initialReaction,x]);let W=O?a.question_detail:a.question_detail.length>200?a.question_detail.slice(0,200)+"...":a.question_detail;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"question-content",children:[(0,e.jsxs)("div",{className:"user-content flex justify-between items-center",children:[(0,e.jsxs)("div",{className:"user-info flex items-center",children:[m.avatar_url?(0,e.jsx)(b.Z,{src:m.avatar_url,width:32,height:32,alt:"User",className:"user-avatar max-w-8 me-2"}):(0,e.jsx)("div",{className:"me-2",children:(0,e.jsx)(r.nY,{})}),(0,e.jsxs)("div",{className:"user-name text-m inline-flex gap-x-2",children:[(0,e.jsx)("strong",{className:`${m.role==="moderator"?"text-primary":""}`,children:m.name}),(0,e.jsx)("span",{children:" | "}),(0,e.jsx)("span",{className:"post-time",children:m.time})]})]}),l&&Q?.isUserLoggedIn&&(0,e.jsxs)("div",{className:"user-actions relative cursor-pointer",ref:J,children:[(0,e.jsx)("span",{onClick:()=>S(!g),className:"user-action-button",children:"..."}),(0,e.jsx)("ul",{className:`user-action-links absolute end-0 py-2 ps-3 pe-6 rounded-md shadow-[0px_1px_2px_0px_rgba(0,0,0,0.1)] bg-white list-none ${g?"active block":"hidden"}`,children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("li",{onClick:()=>{K(!0),$(c).then(d=>{P(d)})},className:"flex items-center",children:A?.[c]?.report}),m.name===l.userName&&(0,e.jsx)("li",{onClick:()=>{(0,f.Ax)(a.id,"question",c,M)},className:"flex items-center",children:A?.[c]?.delete})]})})]})]}),(0,e.jsxs)("div",{className:"question-text mt-4",children:[a.category&&(0,e.jsx)("div",{className:"tags p-1.5 bg-color-secondary rounded-lg text-primary inline-block",children:a.category}),W&&(0,e.jsx)("div",{className:"question mt-2 mb-4",children:(0,e.jsx)(U.G,{html:W})}),W.length>200&&(0,e.jsx)("div",{className:"showmore mb-2 inline-flex gap-1 items-start cursor-pointer text-blue text-m",onClick:()=>te(),children:O?(0,e.jsxs)(e.Fragment,{children:[A?.[c]?.see_less,(0,e.jsx)("span",{className:"mt-[2px] transition-all ease-in-out -rotate-90",children:(0,e.jsx)(r.ol,{stroke:"#4856df",width:14,height:14})})]}):(0,e.jsxs)(e.Fragment,{children:[A?.[c]?.see_more,(0,e.jsx)("span",{className:"mt-[2px] transition-all ease-in-out rotate-90",children:(0,e.jsx)(r.ol,{stroke:"#4856df",width:14,height:14})})]})})]}),(0,e.jsxs)("div",{className:"reactions flex justify-between items-center mb-4",children:[(0,e.jsx)(k.Z,{reactions:F}),(0,e.jsxs)("span",{className:"comment-count text-m",children:[a.comment_count," ",A?.[c]?.comments]})]})]}),(0,e.jsxs)("div",{className:"like-comment mb-6 flex justify-between",children:[(0,e.jsx)("button",{className:`${V?"":"pointer-events-none opacity-50"} like-button border border-gray-300 rounded-md text-center flex-[0_0_50%] flex justify-center items-center`,children:Q?.isUserLoggedIn?(0,e.jsx)(Z.Z,{reaction:L,setReaction:D,handleReaction:(d,X,B)=>{D(T=>T===d?null:d),I(T=>L!==null&&L!==d?{...T,[L]:Math.max(parseInt(T[L],10)-1,0),[d]:parseInt(T[d],10)+1}:{...T,[d]:L===d?Math.max(parseInt(T[d],10)-1,0):L!=null?parseInt(T[d],10):parseInt(T[d],10)+1}),re(d,X,B)},resId:a.id,resType:"node",disableIcon:m.name===l.userName}):(0,e.jsxs)(C.default,{href:"#",onClick:se,className:"flex justify-center items-center gap-1.5",children:[(0,e.jsx)(r.gz,{})," ",A?.[c]?.like]})}),(0,e.jsxs)("button",{className:`${V?"":"pointer-events-none opacity-50"} comment-button py-3 gap-1.5 border border-gray-300 rounded-md text-center flex-[0_0_50%] flex items-center justify-center`,onClick:w,children:[(0,e.jsx)("span",{className:"comment-icon",children:(0,e.jsx)(r.qt,{})}),Q?.isUserLoggedIn?(0,e.jsx)("span",{children:A?.[c]?.comment}):(0,e.jsx)(C.default,{onClick:se,className:"use-ajax flex justify-center items-center",href:"#",children:A?.[c]?.comment})]})]}),(0,e.jsx)(v.Z,{isOpen:Y,onClose:()=>K(!1),onSubmit:d=>{(0,f.Fe)(a.id,d,c,"node",M,A)},reasonOptions:o,resourceId:a.id,entityType:"node"}),z&&(0,e.jsx)(u.Z,{message:z})]})}},H.__chunk_73653=(G,R,s)=>{"use strict";s.d(R,{Z:()=>u});var e=s(60926),r=s(29220),n=s(58936),U=s(80390),k=s(83120),Z=s(58997),f=s(73521),v=s(85016),C=s(34929),_=s(7433),b=s(19195);let h=(0,r.forwardRef)((i,j)=>{let[t,y]=(0,r.useState)(""),[$,E]=(0,r.useState)(!1),a=(0,r.useRef)(null),w=(0,r.useRef)(null),l=i.currentUser,[m,x]=(0,r.useState)(!1),[q,N]=(0,r.useState)(""),{translations:F}=(0,_.T)(),I=(0,b.useLocale)(),{role:L}=(0,v.Q)();(0,r.useImperativeHandle)(j,()=>({focus:()=>{a.current?.focus()}})),(0,r.useEffect)(()=>{let p=setTimeout(()=>{x(!1),N("")},3e3);return()=>clearTimeout(p)},[q]),(0,r.useEffect)(()=>{let p=g=>{a.current&&!a.current.contains(g.target)&&w.current&&!w.current.contains(g.target)&&E(!1)};return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[]);let D=async(p,g,S)=>{let J=await(0,C.getAccessToken)();try{(await(0,n.p1)(g,p,S,J,I)).status===200&&(x(!0),S==="review"&&L!=="moderator"?N(F?.[I].posted_comments):S==="review"&&L==="moderator"?(N(F?.[I].moderator_posted_comments||"You posted a comment."),i.addComment(g,p)):N(F?.[I]?.draft_comments))}catch(Y){console.error("Error creating resource:",Y)}},O=(p,g,S)=>{p.preventDefault(),t.trim().length>0&&(D(t,g,S),y(""))};return(0,e.jsxs)("div",{className:"comment-input flex gap-x-4",children:[l&&l.isUserLoggedIn&&l.userAvatarUrl&&(0,e.jsx)(e.Fragment,{children:l.userAvatarUrl?(0,e.jsx)("div",{className:"current-user",children:(0,e.jsx)(Z.Z,{alt:l.userName,width:32,height:32,src:(0,f.GR)("/"+l.userAvatarUrl),title:l.userName})}):(0,e.jsx)("div",{className:"current-user",children:(0,e.jsx)(k.nY,{})})}),(0,e.jsxs)("form",{action:"",className:"w-full",children:[(0,e.jsx)("input",{ref:a,type:"text",className:"w-full bg-gray-300 rounded-lg p-3",placeholder:`${i.placeholder} ${i.username}`,value:t,onChange:p=>y(p.target.value),onFocus:()=>E(!0)}),$&&(0,e.jsxs)("div",{className:"form-submit inline-flex items-center gap-x-2 mt-5 w-full justify-end",ref:w,children:[(0,e.jsx)("input",{type:"button",onClick:p=>O(p,i.resourceId,"draft"),value:F?.[I]?.draft_button,disabled:!t.trim(),className:"draft-button px-4 py-2 text-primary cursor-pointer disabled:opacity-80 disabled:pointer-events-none hover:text-red"}),(0,e.jsx)("input",{type:"submit",onClick:p=>O(p,i.resourceId,"review"),value:F?.[I].post_button,className:"px-4 py-2 bg-primary cursor-pointer disabled:opacity-75 disabled:pointer-events-none rounded-md text-white hover:bg-red-100",disabled:!t.trim()})]})]}),q&&(0,e.jsx)(U.Z,{message:q})]})});h.displayName="CommentInput";let u=h},H);export{le as __getNamedExports};
